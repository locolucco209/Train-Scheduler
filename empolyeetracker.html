<!DOCTYPE html>
<html lang="en-us">

  <head>

    <meta charset="UTF-8">
    <title>Employee Tracker</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  </head>

  <body>

    <div class="container">

      <br>

      <!-- Jumbotron -->
      <div class="jumbotron">
        <h1 class="text-center">Employee Tracker</h1>
      </div>
      <div class="row">

        <!-- Sign-Up Panel-->
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Current Employees</h3>
            </div>
            <div class="panel-body">

              <!-- Sign-up Form (note the various input "types")-->
              <table class="table">
                <thead>
                  <tr>
                    <th>Employee Name</th>
                    <th>Role</th>
                    <th>Start Date</th>
                    <th>Monthly</th>
                    <th>Months Worked</th>
                    <th>Total Rate ($)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <!--  <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>
                  <tr>
                    <td>col 1</td>
                    <td>col 2</td>
                    <td>col 3</td>
                    <td>col 3</td>
                    <td>col4 </td>
                    <td>col 5</td>
                  </tr>-->
                </tbody>
              </table>
              </form>
            </div>
          </div>
        </div>

        <!-- Sign-Up Panel-->
        <div class="col-lg-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Add Employees</h3>
            </div>
            <div class="panel-body">

              <!-- Sign-up Form (note the various input "types")-->
              <form role="form">
                <div class="form-group">
                  <label for="trainName-input">Employee Data Management</label>
                  <input class="form-control" id="trainName-input" type="text">
                </div>
                <div class="form-group">
                  <label for="destination-input">Role</label>
                  <input class="form-control" id="destination-input" type="text">
                </div>
                <div class="form-group">
                  <label for="firstTrainTime-input">Start Date (DD/MM/YY - ex:01/01/89)</label>
                  <input class="form-control" id="firstTrainTime-input" type="date">
                </div>
                <div class="form-group">
                  <label for="frequency">Monthly Rate</label>
                  <input class="form-control" id="frequency-input" type="text">
                </div>
                <button class="btn btn-default" id="add-user" type="submit">Submit</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Most Recent Member Panel
        <div class="col-lg-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Your Receipt</h3>
            </div>
            <div class="panel-body" id="recent-member">
              <h4 id="trainName-display">Employee</h4>
              <h4 id="destination-display">Start Date (DD/MM/YY - ex:01/01/89)</h4>
              <h4 id="firstTrainTime-display">Monthly Rate</h4>
              <p id="frequency-display"></p>
            </div>
          </div>
        </div>-->
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- LINK TO FIREBASE GOES HERE -->
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

    <!-- Script -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.21.0/moment.min.js"></script>
    <script>
      //  START CODING BELOW!!

      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAYM1Sl4DGvHxz3Ie8K8uPSOZfknpHVDtQ",
        authDomain: "employee-tracker-da704.firebaseapp.com",
        databaseURL: "https://employee-tracker-da704.firebaseio.com",
        projectId: "employee-tracker-da704",
        storageBucket: "employee-tracker-da704.appspot.com",
        messagingSenderId: "855798331599"
      };
      firebase.initializeApp(config);

      // Create a variable to reference the database
      var database = firebase.database();
      var trainName = "";
      var destination = "";
      var firstTrainTime = "";
      var frequency = "";


      // Capture Button Click
      $("#add-user").on("click", function() {
        // Don't refresh the pfirstTrainTime!
        event.preventDefault();

        // YOUR TASK!!!
        trainName = $("#trainName-input").val().trim();
        destination = $("#destination-input").val().trim();
        firstTrainTime = $("#firstTrainTime-input").val().trim();
        frequency = $("#frequency-input").val().trim();

        // Code in the logic for storing and retrieving the most recent user.
        database.ref().push({
          //database.ref().set({
          trainName: trainName,
          destination: destination,
          firstTrainTime: firstTrainTime,
          frequency: frequency
        });
      });
      // Don't forget to provide initial data to your Firebase database.
      // Firebase watcher + initial loader HINT: .on("value")
      //database.ref().on("value", function(snapshot) {
      database.ref().on("child_added", function(snapshot) {
        //  console.log(snapshot.val());
        //  console.log(snapshot.val().trainName);

        //  var m = snapshot.val().trainName;
        //  alert(snapshot.val().trainName);
        //  console.log(m)
        console.log(snapshot.val().trainName, snapshot.val().destination, snapshot.val().firstTrainTime, snapshot.val().frequency)
      });

      //  $("#trainName-display").text("Train Name: " + snapshot.val().trainName);
      //  $("#destination-display").text("Destination: " + snapshot.val().destination);
      //  $("#firstTrainTime-display").text("Train Time: " + snapshot.val().firstTrainTime);
      //});

      // Create Error Handling
      var dt = new Date();
      var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds();
    </script>

  </body>

</html>