<!DOCTYPE html>
<html lang="en-us">

  <head>

    <meta charset="UTF-8">
    <title>Sign-Up Today!</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  </head>

  <body>

    <div class="container">

      <br>

      <!-- Jumbotron -->
      <div class="jumbotron">
        <h1 class="text-center">Metro North Train</h1>
      </div>
      <div class="row">

        <!-- Sign-Up Panel-->
        <div class="col-lg-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Current Train Schedule</h3>
            </div>
            <div class="panel-body">

              <!-- Sign-up Form (note the various input "types")-->
              <table>
                <thead>
                  <tr>
                    <th>Train Name</th>
                    <th>Destination</th>
                    <th>Frequency (min)</th>
                    <th>Next Arrival</th>
                    <th>Minutes Away</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Bitcoin</td>
                    <td>Mars</td>
                    <td>Cell C1</td>
                    <td>7:53 PM</td>
                    <td>10:00</td>
                  </tr>
                  <tr>
                    <td>Litecoin</td>
                    <td>Venus</td>
                    <td>Cell C2</td>
                    <td>5:03 PM</td>
                    <td>7:00</td>
                  </tr>
                  <tr>
                    <td>Enthereum</td>
                    <td>Oriontonio</td>
                    <td>Cell C3</td>
                    <td>12:41 PM</td>
                    <td>8:00</td>
                  </tr>
                  <tr>
                    <td>Dash</td>
                    <td>Freallo</td>
                    <td>Cell C4</td>
                    <td>9:31 AM</td>
                    <td>45:00</td>
                  </tr>
                  <tr>
                    <td>Ripple</td>
                    <td>Stollio</td>
                    <td>Cell C4</td>
                    <td>2:34 PM</td>
                    <td>15:00</td>
                  </tr>
                  <tr>
                    <td>Monero</td>
                    <td>Frontsho</td>
                    <td>Cell C4</td>
                    <td>11:31 AM</td>
                    <td>45:00</td>
                  </tr>
                  <tr>
                    <td>Stellar</td>
                    <td>Signalio</td>
                    <td>Cell C4</td>
                    <td>3:25 PM</td>
                    <td>25:00s</td>
                  </tr>
                </tbody>
              </table>
              </form>
            </div>
          </div>
        </div>



        <!-- Sign-Up Panel-->
        <div class="col-lg-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Add Train</h3>
            </div>
            <div class="panel-body">

              <!-- Sign-up Form (note the various input "types")-->
              <form role="form">
                <div class="form-group">
                  <label for="trainName-input">Train Name</label>
                  <input class="form-control" id="trainName-input" type="text">
                </div>
                <div class="form-group">
                  <label for="destination-input">Destination</label>
                  <input class="form-control" id="destination-input" type="text">
                </div>
                <div class="form-group">
                  <label for="firstTrainTime-input">First Train Time (HH:mm - military time)</label>
                  <input class="form-control" id="firstTrainTime-input" type="number">
                </div>
                <div class="form-group">
                  <label for="frequency">Frequency (min)</label>
                  <input class="form-control" id="frequency-input" type="text">
                </div>
                <button class="btn btn-default" id="add-user" type="submit">Submit</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Most Recent Member Panel -->
        <div class="col-lg-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Your Receipt</h3>
            </div>
            <div class="panel-body" id="recent-member">
              <h4 id="trainName-display">Train Name:</h4>
              <h4 id="destination-display">Destination:</h4>
              <h4 id="firstTrainTime-display">Time Time:</h4>
              <p id="frequency-display"></p>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- LINK TO FIREBASE GOES HERE -->
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

    <!-- Script -->
    <script>
      //  START CODING BELOW!!

      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyB-Cm9wt0XL4W_uXDGIfqKmqYYuk94-8d8",
        authDomain: "train-time-df5e4.firebaseapp.com",
        databaseURL: "https://train-time-df5e4.firebaseio.com",
        projectId: "train-time-df5e4",
        storageBucket: "train-time-df5e4.appspot.com",
        messagingSenderId: "901917425737"
      };
      firebase.initializeApp(config);

      // Create a variable to reference the database
      var database = firebase.database();
      var trainName = "";
      var destination = "";
      var firstTrainTime = "";
      var frequency = "";


      // Capture Button Click
      $("#add-user").on("click", function() {
        // Don't refresh the pfirstTrainTime!
        event.preventDefault();

        // YOUR TASK!!!
        trainName = $("#trainName-input").val().trim();
        destination = $("#destination-input").val().trim();
        firstTrainTime = $("#firstTrainTime-input").val().trim();
        frequency = $("#frequency-input").val().trim();

        // Code in the logic for storing and retrieving the most recent user.
        database.ref().set({
          trainName: trainName,
          destination: destination,
          firstTrainTime: firstTrainTime,
          frequency: frequency
        });
      });
      // Don't forget to provide initial data to your Firebase database.
      // Firebase watcher + initial loader HINT: .on("value")
      database.ref().on("value", function(snapshot) {


        $("#trainName-display").text("Train Name: " + snapshot.val().trainName);
        $("#destination-display").text("Destination: " + snapshot.val().destination);
        $("#firstTrainTime-display").text("Train Time: " + snapshot.val().firstTrainTime);
      })

      // Create Error Handling
    </script>

  </body>

</html>